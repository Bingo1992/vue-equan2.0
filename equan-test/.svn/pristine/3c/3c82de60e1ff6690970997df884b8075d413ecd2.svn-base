{"version":3,"sources":["webpack:///src/pages/product/children/productDetail.vue","webpack:///./src/pages/product/children/productDetail.vue?cbb6","webpack:///./src/pages/product/children/productDetail.vue"],"names":["productDetail","data","proDetail","imglistSrc","count","showLoading","showAttrDialog","showAlertTip","alertText","components","Banner","swiperDefault","Loading","loading","alertTip","cartNum","mounted","document","title","this","_initData","mixins","mixin","methods","extends_default","Object","vuex_esm","_this","self","api","params","productid","$route","query","then","res","pic","forEach","element","index","push","$nextTick","window","scrollTo","swiper1","Swiper","pagination","paginationClickable","loop","autoplay","autoplayDisableOnInteraction","length","stopAutoplay","detachEvents","showHideAlert","text","_this2","setTimeout","addToCart","img","price","marketPrice","ebuy","_this3","quality","ADD_CART","productId","productImg","productName","currCost","currPrice","check","total","goToBuy","goods","storage","$router","path","skuId","watch","children_productDetail","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","listImg","myClass","hasPoint","_v","key","id","_s","name","cost","_l","item","i","src","getImgPath","showPic","domProps","innerHTML","description","staticStyle","padding-bottom","to","on","click","$event","_e","alert-text","staticRenderFns","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/20.b698553da1ad886e0aec.js","sourcesContent":["<template>\n    <div class=\"children-view\">\n        <loading v-if=\"showLoading\"></loading>\n        <section v-else class=\"content-main\">\n            <!-- 图片轮播 -->\n            <banner :listImg=\"imglistSrc\" myClass=\"1\"  hasPoint=\"true\"></banner>\n            <div :key=\"proDetail.id\">\n                <div class=\"pro-list pdl pdr pdb\">\n                   <!--  <div class=\"label\">\n                        <span v-if=\"proDetail.label1\" class=\"label-orange\">{{proDetail.label1}}</span>\n                        <span v-if=\"proDetail.label2\" class=\"label-blue\">{{proDetail.label2}}</span>\n                        <span v-if=\"proDetail.label3\" class=\"label-red\">{{proDetail.label3}}</span>\n                    </div>\n                     -->\n                    <h4 class=\"pro-title\">\n                        <!-- <span v-if=\"proDetail.ebuy == 1\" class=\"label-red\">支持e购</span>&nbsp; -->\n                        {{proDetail.name}}\n                        </h4>\n                    <div class=\"price\">\n                        <span class=\"font-orange lg-font\">\n                            <i class=\"icon-coin\"></i>\n                            {{proDetail.cost}}\n                        </span>\n                        <s class=\"right-text font-gray\">市场价￥{{proDetail.price}}</s>\n                    </div>\n                </div>   \n                <div class=\"bg-mgShow pro-detail\">\n                    <h4 class=\"center-text\">商品详情</h4>\n                    <img v-for=\"(item,i) in proDetail.detailImg\" :src=\"getImgPath(item.showPic)\" :key=\"i\">\n                    <div class=\"rich-box\" v-html=\"proDetail.description\"></div>\n                </div>\n            </div>\n\n            <div style=\"padding-bottom:50px\"></div>\n       \n        </section>\n\n        <div class=\"fixed-bottom bg-gray\">\n            <div class=\"bottomBtn two-btn border-top\">\n                <router-link class=\"backNav border-right\" to=\"/cart\">\n                    <i class=\"icon-cart\"></i>\n                    <!-- <span v-if=\"cartNum != 0\" class=\"circlePoint\">{{cartNum}}</span> -->\n                    <cart-num></cart-num>\n                </router-link>\n                <a v-if=\"count != 0\" class=\"btn-cart\" @click=\"addToCart(\n                    proDetail.showPic, \n                    proDetail.name, \n                    proDetail.cost, \n                    proDetail.price, \n                    proDetail.ebuy)\">加入购物车</a>\n                <a v-if=\"count != 0\" @click=\"goToBuy(\n                    proDetail.showPic, \n                    proDetail.name, \n                    proDetail.cost, \n                    proDetail.price, \n                    proDetail.ebuy)\" class=\"btn-theme\">立即购买</a>\n                <a v-else class=\"btn-pure-theme disbtn\">商品已售罄</a>\n            </div>\n        </div>\n\n         <!-- 提示遮罩 -->\n        <alert-tip v-if=\"showAlertTip\" :alert-text=\"alertText\"></alert-tip>\n          \n    </div>\n    \t \n\n</template>\n\n<script>\nimport {mapMutations} from 'vuex'\nimport {proDetail, addCart} from '/api/api'\nimport { setStore } from '/utils/storage'\nimport {getImgPath} from '/components/mixin'\nimport alertTip from '/components/alertTip'\nimport Banner from '/components/swiperDefault'\nimport Loading from '/components/loading'\nimport cartNum from '/components/cartNum'\n\nexport default {\n\tdata(){\n\t\treturn {\n\t\t\tproDetail: [],\n\t\t\timglistSrc:[],//轮播图\n            count: 0,//商品：1上架，0下架\n            showLoading: true,\n            showAttrDialog: false,\n            showAlertTip: false,\n            alertText: \"\"\n\t\t}\n\t},\n    components: {\n        Banner, Loading, alertTip, cartNum\n    },\n\tmounted() {\n        document.title = \"商品详情\";\n\t\tthis._initData();\n    },\n    mixins: [getImgPath],\n    // computed: {\n    //     ...mapState(['cartList']),\n    //     cartNum () {\n    //       let cartNum = 0;\n    //       this.cartList && this.cartList.forEach( item => {\n    //          cartNum += item.proNum;\n    //       })\n    //       return cartNum;\n    //     }\n    // },\n\tmethods: {  \n        ...mapMutations(['ADD_CART']),\n\t\t_initData() {\n            var self = this;\n            // document.title = \"商品详情\";\n            // console.log(document.title)\n            proDetail({params:{productid: this.$route.query.productid}}).then(res => {\n                this.proDetail = res;\n                this.count = this.proDetail.count;\n                this.showLoading = false;\n                let pic = this.proDetail.pic;   \n                pic&&pic.forEach( function(element, index) {\n                    self.imglistSrc.push({'pic':element});\n                });\n                this.$nextTick(() => {\n                    window.scrollTo(0,1);\n                    window.scrollTo(0,0);\n                    var swiper1 = new Swiper('.swiper-container1', {\n                        pagination: '.swiper-pagination1',\n                        paginationClickable: true,\n                        loop: true,\n                        autoplay: 4500,\n                        autoplayDisableOnInteraction: false\n                    });\n                    // 只有一张图时禁止轮播\n                    if(self.imglistSrc.length <= 1) {\n                        swiper1.stopAutoplay();//停止自动播放\n                        swiper1.detachEvents(); //移除所有监听事件\n                    }\n                })\n               \n            })\n\t\t},\n        //显示弹窗\n        showHideAlert(text) { \n            this.showAlertTip = true;\n            this.alertText = text;\n            setTimeout(() => {\n                this.showAlertTip = false;\n            }, 1500);\n        },\n        //加入购物车\n        addToCart(img, title, price, marketPrice, ebuy) {\n            addCart({quality:1}, this.$route.query.productid).then(res => {\n                this.ADD_CART({\n                    productId: this.$route.query.productid,\n                    productImg: img,\n                    productName: title,\n                    currCost: price,\n                    currPrice: marketPrice,\n                    check: false,\n                    total: 1,\n                    ebuy: ebuy\n                });\n                this.showHideAlert('已成功加入购物车');\n            });\n        },\n        // 点击购买\n        goToBuy(img, title, price, marketPrice, ebuy) {\n            let goods = [];\n            goods.push({\n                productId: this.$route.query.productid,\n                currCost: price,\n                productName: title,\n                productImg: img,\n                currPrice: marketPrice,\n                total: 1,\n                check: true,\n                ebuy: ebuy\n            });\n         \n            setStore('buyPro',goods);//将当前购买的商品信息存储到buyPro\n            this.$router.push({path:'/orderConfirm',query:{skuId: this.$route.query.productid}});\n        }\n       \n\t},\n    watch:{\n        '$route':'_initData'\n    }\n\n}\n</script>\n\n<style lang=\"scss\" scoped>\n@import \"../../../assets/scss/var.scss\";\n.content-main {\n    position: absolute;\n    top: 0;\n    left: 0;\n    width: 100%;\n    height: 100%;\n    // padding-bottom: 84px;\n    z-index: 5;\n    overflow: auto;\n    -webkit-overflow-scroll: touch;\n    padding-bottom: constant(safe-area-inset-bottom);\n    padding-bottom: env(safe-area-inset-bottom);\n}\n.swiper-container1 {\n    height: pxTorem(750);\n    .swiper-pagination-bullet-active{\n        background: #717171 !important;\n    }\n    .swiper-pagination-bullet {\n        opacity: 1 !important;\n    }\n}\n.backNav {\n    flex-direction: column;\n    background-color: #fafafa;\n    height: 50px;\n    padding: 0 20px;\n    color: #b2b2b2;\n    i{font-size: 24px;}\n    \n}\n.btn-cart {\n   background-color: #fafafa;\n   width: 100%;\n   font-size: 16px;\n}\n    \n.bottomBtn {\n    a {\n        flex: auto;\n        -webkit-flex: auto;\n    }\n    .btn-theme {\n        width: 100%;\n        font-size: 16px;\n    }\n    .disbtn {\n        width: 80%;\n        font-size: 16px;\n    }\n}\n.price {\n    .lg-font {\n        font-size: 18px !important;\n        padding-right: 6px;\n        .icon-coin {font-size: 16px;}\n    }\n}\n\n.pro-detail {\n    h4 {\n        padding: 24px 0;\n    }\n}\n\n</style>\n\n\n// WEBPACK FOOTER //\n// src/pages/product/children/productDetail.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"children-view\"},[(_vm.showLoading)?_c('loading'):_c('section',{staticClass:\"content-main\"},[_c('banner',{attrs:{\"listImg\":_vm.imglistSrc,\"myClass\":\"1\",\"hasPoint\":\"true\"}}),_vm._v(\" \"),_c('div',{key:_vm.proDetail.id},[_c('div',{staticClass:\"pro-list pdl pdr pdb\"},[_c('h4',{staticClass:\"pro-title\"},[_vm._v(\"\\n                    \"+_vm._s(_vm.proDetail.name)+\"\\n                    \")]),_vm._v(\" \"),_c('div',{staticClass:\"price\"},[_c('span',{staticClass:\"font-orange lg-font\"},[_c('i',{staticClass:\"icon-coin\"}),_vm._v(\"\\n                        \"+_vm._s(_vm.proDetail.cost)+\"\\n                    \")]),_vm._v(\" \"),_c('s',{staticClass:\"right-text font-gray\"},[_vm._v(\"市场价￥\"+_vm._s(_vm.proDetail.price))])])]),_vm._v(\" \"),_c('div',{staticClass:\"bg-mgShow pro-detail\"},[_c('h4',{staticClass:\"center-text\"},[_vm._v(\"商品详情\")]),_vm._v(\" \"),_vm._l((_vm.proDetail.detailImg),function(item,i){return _c('img',{key:i,attrs:{\"src\":_vm.getImgPath(item.showPic)}})}),_vm._v(\" \"),_c('div',{staticClass:\"rich-box\",domProps:{\"innerHTML\":_vm._s(_vm.proDetail.description)}})],2)]),_vm._v(\" \"),_c('div',{staticStyle:{\"padding-bottom\":\"50px\"}})],1),_vm._v(\" \"),_c('div',{staticClass:\"fixed-bottom bg-gray\"},[_c('div',{staticClass:\"bottomBtn two-btn border-top\"},[_c('router-link',{staticClass:\"backNav border-right\",attrs:{\"to\":\"/cart\"}},[_c('i',{staticClass:\"icon-cart\"}),_vm._v(\" \"),_c('cart-num')],1),_vm._v(\" \"),(_vm.count != 0)?_c('a',{staticClass:\"btn-cart\",on:{\"click\":function($event){_vm.addToCart(\n                _vm.proDetail.showPic, \n                _vm.proDetail.name, \n                _vm.proDetail.cost, \n                _vm.proDetail.price, \n                _vm.proDetail.ebuy)}}},[_vm._v(\"加入购物车\")]):_vm._e(),_vm._v(\" \"),(_vm.count != 0)?_c('a',{staticClass:\"btn-theme\",on:{\"click\":function($event){_vm.goToBuy(\n                _vm.proDetail.showPic, \n                _vm.proDetail.name, \n                _vm.proDetail.cost, \n                _vm.proDetail.price, \n                _vm.proDetail.ebuy)}}},[_vm._v(\"立即购买\")]):_c('a',{staticClass:\"btn-pure-theme disbtn\"},[_vm._v(\"商品已售罄\")])],1)]),_vm._v(\" \"),(_vm.showAlertTip)?_c('alert-tip',{attrs:{\"alert-text\":_vm.alertText}}):_vm._e()],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-2486b6a1\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/product/children/productDetail.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-2486b6a1\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./productDetail.vue\")\n}\nvar normalizeComponent = require(\"!../../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./productDetail.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../../node_modules/vue-loader/lib/selector?type=script&index=0!./productDetail.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-2486b6a1\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../../node_modules/vue-loader/lib/selector?type=template&index=0!./productDetail.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-2486b6a1\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/product/children/productDetail.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}