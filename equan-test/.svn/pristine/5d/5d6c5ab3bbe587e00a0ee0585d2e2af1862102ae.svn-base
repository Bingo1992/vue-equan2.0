webpackJsonp([7],{"3uSt":function(t,s,i){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var a=i("Gu7T"),e=i.n(a),o=i("Dd8w"),r=i.n(o),n=i("NYxO"),c=i("P9l9"),l=i("mzkE"),h=i("u+Fy"),d=i("BzkK"),u={name:"sortTabs",data:function(){return{bannerUrl:"",bannerImg:"",sortList1:[],sortList2:[],sortList3:[{name:"价格从高到低",value:1},{name:"价格从低到高",value:2}],sortPriceIndex:null,odByName:"价格",odByVal:"",lowPrice:"",highPrice:"",showAlertTip:!1}},props:["sortIndex"],mixins:[i("Dqno").b],created:function(){this._initData()},components:{alertTip:d.a},computed:r()({},Object(n.c)(["sortProIndex"])),methods:r()({},Object(n.b)(["CHOOSE_PROSORT"]),{_initData:function(){var t=this;Object(c.A)().then(function(s){t.sortList1=s.obj,t.bannerUrl=s.obj[0].classifyImgHref,t.bannerImg=s.obj[0].classifyImgSrc,t.sortList2=s.obj.subGoodsClassifyList[0]})},closeDialog:function(){this.$emit("closeDialog")},sortPro:function(t,s,i){var a=this;this.CHOOSE_PROSORT({sortPro:t,index:i}),this.bannerUrl=res.obj[i].classifyImgHref,this.bannerImg=res.obj[i].classifyImgSrc,this.sortList2=[],Object(c.A)().then(function(t){var i=t.obj.subGoodsClassifyList;i&&i.forEach(function(t,i){t.parentId==s&&a.sortList2.push(t)})})},getSortpro:function(t){this.$emit("sortType",t),this.$emit("closeDialog")},getPriceSort:function(t,s,i){this.sortPriceIndex=i,this.odByName=t,this.odByVal=s},confirmBtn:function(){Number(this.lowPrice)>Number(this.highPrice)?this.showHideAlert("最低价不能高于最高价"):(this.$emit("sortPrice",this.odByName,this.odByVal,this.lowPrice,this.highPrice),this.$emit("closeDialog"))},resetBtn:function(){this.odByName="价格",this.lowPrice="",this.highPrice="",this.odByVal="",this.sortPriceIndex=null,this.$emit("sortPrice",this.odByName,this.odByVal,this.lowPrice,this.highPrice),this.$emit("closeDialog")},showHideAlert:function(t){var s=this;this.showAlertTip=!0,this.alertText=t,setTimeout(function(){s.showAlertTip=!1},1500)}})},m={render:function(){var t=this,s=t.$createElement,i=t._self._c||s;return i("div",[0==t.sortIndex?i("div",{staticClass:"sort-box"},[i("div",{staticClass:"box-cnt"},[i("ul",{staticClass:"sortNav-fl"},t._l(t.sortList1,function(s,a){return i("li",{key:a,class:{active:t.sortProIndex==a},on:{click:function(i){t.sortPro(s.classifyName,s.id,a)}}},[i("span",[t._v(t._s(s.classifyName))])])})),t._v(" "),i("ul",{staticClass:"sortNav-fr list-info-v"},[i("li",[i("a",{attrs:{href:t.bannerUrl}},[i("img",{attrs:{src:t.getImgPath(t.bannerImg)}})]),t._v(" "),i("ul",{staticClass:"second-sortNav"},t._l(t.sortList2,function(s,a){return i("li",{key:a,on:{click:function(i){t.getSortpro(s.id)}}},[i("a",{attrs:{href:"#"}},[i("img",{attrs:{src:t.getImgPath(s.classifyImgSrc)}}),t._v(" "),i("p",[t._v(t._s(s.classifyName))])])])}))])])])]):t._e(),t._v(" "),1==t.sortIndex?i("div",{staticClass:"sort-box"},[i("div",{staticClass:"box-cnt2"},[i("div",[i("span",[t._v("价格区间")]),t._v(" "),i("div",{staticClass:"price-zone"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.lowPrice,expression:"lowPrice"}],staticClass:"low",attrs:{type:"number",placeholder:"最低价格"},domProps:{value:t.lowPrice},on:{input:function(s){s.target.composing||(t.lowPrice=s.target.value)}}}),t._v(" "),i("span",[t._v("-")]),t._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:t.highPrice,expression:"highPrice"}],staticClass:"high",attrs:{type:"number",placeholder:"最高价格"},domProps:{value:t.highPrice},on:{input:function(s){s.target.composing||(t.highPrice=s.target.value)}}})])]),t._v(" "),i("div",{staticClass:"sort-price"},[i("span",[t._v("价格排序")]),t._v(" "),i("ul",t._l(t.sortList3,function(s,a){return i("li",{key:a,class:{active:t.sortPriceIndex==a},on:{click:function(i){t.getPriceSort(s.name,s.value,a)}}},[i("span",[t._v(t._s(s.name))])])}))]),t._v(" "),i("div",{staticClass:"flex-layout price-btn"},[i("p",{staticClass:"btn-cancel",on:{click:t.resetBtn}},[t._v("重置")]),t._v(" "),i("p",{staticClass:"btn-sort-confirm btn-theme",on:{click:t.confirmBtn}},[t._v("确定")])])])]):t._e(),t._v(" "),i("div",{staticClass:"ui-dialog",on:{click:function(s){t.closeDialog()}}}),t._v(" "),t.showAlertTip?i("alert-tip",{attrs:{alertText:t.alertText}}):t._e()],1)},staticRenderFns:[]};var p=i("VU/8")(u,m,!1,function(t){i("8guS")},"data-v-3ea9774c",null).exports,v=i("KgXo"),g=i("NXlk"),f=i("hXbj"),_={name:"productList",data:function(){return{showLoading:!0,sortList:["全部分类","价格"],timer:null,count:0,proList:[],searchVal:"",params:{areaId:"",showType:"",odBy:"",pName:"",vFrom:"",vTo:"",page:1},odByName:"价格",sortIndex:null,isLastPage:!1,loadmore:!0,isLoading:!0,noData:!1}},components:{product:h.a,loading:v.a,sortTabs:p,loadMore:g.a,cartNum:f.a,FooterNav:l.a},computed:r()({},Object(n.c)(["sortPro"])),created:function(){this.CHOOSE_PROSORT({sortPro:"全部分类",index:0}),this._initData()},methods:r()({},Object(n.b)(["CHOOSE_PROSORT"]),{_initData:function(){this.$route.query.areaId&&(this.params.areaId=this.$route.query.areaId),this.titleChange(),this._getProList()},_getProList:function(t){var s=this,i={params:{goodsClassifyId:this.params.showType,odBy:this.params.odBy,pName:this.params.pName,vFrom:this.params.vFrom,vTo:this.params.vTo,pageNo:this.params.page}};this.params.areaId&&(i.params.areaId=this.params.areaId),Object(c.u)(i).then(function(i){var a=i.attributes.resultList;s.isLastPage=i.attributes.isLastPage,s.proList=t?[].concat(e()(s.proList),e()(a)):a,s.isLoading=!1,0==s.proList.length?s.loadmore=!1:s.isLastPage?s.noData=!0:s.noData=!1})},loadMore:function(){this.isLastPage?(this.isLoading=!1,this.noData=!0):(this.params.page++,this.isLoading=!0,this.noData=!1,this._getProList(!0))},chooseSort:function(t){this.sortIndex!=t?this.sortIndex=t:this.sortIndex=null},sortPrice:function(t,s,i,a){this.odByName=t,this.params.odBy=s,this.params.vFrom=i,this.params.vTo=a,this.params.page=1,this.loadmore=!0,this.isLoading=!0,this.noData=!1,this.proList=[],this._getProList()},sortType:function(t){this.params.showType=t,this.params.pName="",this.searchVal="",this.resetSort()},searchTarget:function(t){this.params.pName=t,this.resetSort(),this.$refs.searchInput.blur()},resetSort:function(){this.odByName="价格",this.params.odBy="",this.params.vFrom="",this.params.vTo="",this.params.page=1,this.proList=[],this.loadmore=!0,this.isLoading=!0,this.noData=!1,this._getProList()},closeDialog:function(){this.sortIndex=null},titleChange:function(){this.$route.query.areaId&&!this.$route.query.productid?(this.params.areaId=this.$route.query.areaId,Object(c.e)({params:{areaId:this.params.areaId}}).then(function(t){document.title=t.obj.name})):document.title="商品列表"}}),watch:{$route:"titleChange"}},P={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",{class:["banner-bt-p",""==t.params.areaId?"":"banner-bt-pp"]},[a("div",{attrs:{id:"proList"}},[a("div",{staticClass:"fixed-top  bg-show"},[a("ul",{staticClass:"sort-tabs flex-layout"},t._l(t.sortList,function(s,i){return a("li",{key:i,on:{click:function(s){t.chooseSort(i)}}},[a("p",[a("span",[t._v(t._s(0==i?t.sortPro:t.odByName))]),t._v(" "),a("i",{class:[t.sortIndex==i?"icon-arrow-up font-theme":"icon-arrow-down"]})])])}))]),t._v(" "),a("sort-tabs",{directives:[{name:"show",rawName:"v-show",value:null!=t.sortIndex,expression:"sortIndex != null"}],attrs:{sortIndex:t.sortIndex},on:{closeDialog:t.closeDialog,sortPrice:t.sortPrice,sortType:t.sortType}}),t._v(" "),t.proList.length?a("product",{attrs:{proList:t.proList,areaID:t.params.areaId}}):t._e(),t._v(" "),t.loadmore?a("load-more",{attrs:{isLoading:t.isLoading,noData:t.noData},on:{loadMore:t.loadMore}}):t._e(),t._v(" "),0!=t.proList.length||t.isLoading?t._e():a("div",{staticClass:"nothing"},[a("img",{attrs:{src:i("pkH0")}}),t._v(" "),a("p",{staticClass:"font-gray"},[t._v("暂时找不到该商品，我们会尽量引进更多商品")])]),t._v(" "),a("transition",{attrs:{name:"router-slid",mode:"out-in"}},[a("router-view")],1)],1),t._v(" "),""==t.params.areaId?a("div",{staticClass:"fixed-bottom bg-show"},[a("footer-nav")],1):t._e(),t._v(" "),a("div",{staticClass:"fixed-right"},[a("router-link",{attrs:{to:"/cart"}},[a("i",{staticClass:"icon-cart"}),t._v(" "),a("cart-num",{staticClass:"semiCirclePoint"})],1),t._v(" "),t._m(0)],1)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("a",{attrs:{href:"#proList"}},[s("i",{staticClass:"icon-top"})])}]};var b=i("VU/8")(_,P,!1,function(t){i("MpMP")},"data-v-2caf423b",null);s.default=b.exports},"8guS":function(t,s){},MpMP:function(t,s){}});
//# sourceMappingURL=7.52e92d755fda8b310777.js.map