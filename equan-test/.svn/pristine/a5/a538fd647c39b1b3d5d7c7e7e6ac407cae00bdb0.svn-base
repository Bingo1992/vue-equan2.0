{"version":3,"sources":["webpack:///src/pages/order/orderConfirm.vue","webpack:///./src/pages/order/orderConfirm.vue?22e3","webpack:///./src/pages/order/orderConfirm.vue"],"names":["orderConfirm","name","data","showLoading","proList","unCheckCartList","address","paramsList","remark","curAdsId","total_price2","total_ebuy","userEbuy","userIntegeral","failPay","alertText","showAlertTip","flag","formLoading","pay","egou","ebi","money","components","loading","alertTip","mixins","mixin","created","document","title","this","_initData","computed","extends_default","Object","vuex_esm","methods","_this","JSON","parse","storage","cartList","forEach","item","index","check","push","virtual","type","str","productId","total","length","_initAddress","calcTotalMoney","_getUserTotal","_this2","i","currCost","Number","calcTotalEbuy","_this3","ebuy","_this4","api","then","res","leaveCost1","integeralPay","leaveCost2","gotoPay1","_this5","chooseAddress","showHideAlert","join","params","addressid","success","msg","attributes","wxPayTotal","window","location","href","getUrlPath","payOrderId","INIT_BUYCART","$router","_this6","resultList","isdefault","CHOOSE_ADDRESS","id","addressId","text","_this7","setTimeout","watch","$route","order_orderConfirm","render","_vm","_h","$createElement","_c","_self","staticClass","_e","_v","attrs","to","_s","username","mobile","province","city","district","detailaddress","_l","key","src","getImgPath","productImg","productName","currPrice","_m","directives","rawName","value","expression","cols","rows","placeholder","domProps","on","input","$event","target","composing","click","staticRenderFns","checked","disabled","Component","__webpack_require__","normalizeComponent","ssrContext","__webpack_exports__"],"mappings":"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","file":"static/js/13.8af14a11008f5591964d.js","sourcesContent":["<template>\n  <div class=\"orderConfirm banner-b\">\n    <loading v-if=\"showLoading\"></loading>\n\n    <section v-if=\"!showLoading\">\n        <div class=\"logistics bg-show\">   \n            <router-link to=\"/chooseAddress\" class=\"list-box\">\n                <i class=\"icon-map font-gray pdr\"></i>\n                <h5 class=\"list-info-v pdt pdb\" v-if=\"chooseAddress.length === 0\">请添加一个收货地址</h5>\n                <div v-else class=\"list-info-v\">\n                    <div>\n                        <h4>\n                            <span class=\"pdr\">{{chooseAddress.username}}</span>\n                            <span>{{chooseAddress.mobile}}</span>\n                        </h4>\n                        <p class=\"font-gray nowrap-2\">{{chooseAddress.province}}{{chooseAddress.city}}{{chooseAddress.district}}{{chooseAddress.detailaddress}}</p>\n                    </div>\n                   \n                </div>  \n                <i class=\"icon-right\"></i>\n            </router-link>\n        </div>\n\n        <!-- 订单列表 -->\n        <ul class=\"confirm-order\">\n            <li class=\"list-box border-bottom\" v-for=\"(item,i) in proList\" :key=\"i\">\n                <img class=\"list-img\" :src=\"getImgPath(item.productImg)\">\n                <div class=\"list-info-v\">\n                    <div>\n                        <div class=\"list-box\">\n                            <div class=\"list-info-h\">\n                                <h5 class=\"nowrap-2 top-text\">{{item.productName}}</h5>\n                            </div>\n                            <h5 class=\"pdl\">X{{item.total}}</h5>\n                        </div>\n                        \n                        <div class=\"price-big\">\n                            <span class=\"font-orange\"><i class=\"icon-coin\"></i>{{item.currCost}}</span>\n                            <s class=\"font-gray\">市场价：￥{{item.currPrice}}</s>\n                        </div>\n                    </div>\n                    \n                </div>\n            </li>\n        </ul>\n\n\n        <div class=\"bg-mgShow\">\n            <div class=\"title-bar border-bottom\">\n              <h5>给卖家留言</h5>\n            </div>\n            <textarea class=\"txtArea\" cols=\"30\" rows=\"3\" placeholder=\"请输入留言\" v-model=\"remark\"></textarea>\n        </div> \n\n        <div v-if=\"pay.egou != 0\" class=\"bg-mgShow\">\n          <div class=\"title-bar border-bottom\">\n            <h5>使用e购账户</h5>\n          </div>\n          <ul>\n              <li class=\"list-box\">\n                <p class=\"list-info-h\">可用e购账户抵扣<span class=\"font-red\">{{pay.egou}}</span>元</p>\n                 <label class=\"checkbox\">\n                    <input type=\"radio\" checked disabled>\n                    <i class=\"icon-hook\"></i>\n                </label>\n              </li>\n          </ul>\n      </div> \n\n        <div class=\"bg-mgShow\" v-if=\"pay.money != 0 || pay.ebi != 0\">\n            <div class=\"title-bar border-bottom\">\n              <h5>支付方式</h5>\n            </div>\n            <ul>\n                <li class=\"list-box\" v-if=\"pay.ebi != 0\">\n                  <p class=\"list-info-h\">e币支付<span class=\"pdr font-orange\"><i class=\"icon-coin\"></i>{{pay.ebi}}</span></p>\n                   <label class=\"checkbox\">\n                      <input type=\"radio\" checked disabled>\n                      <i class=\"icon-hook\"></i>\n                  </label>\n                </li>\n                <li v-if=\"pay.money != 0\" class=\"list-box\">\n                  <p class=\"list-info-h\">微信支付<span class=\" font-orange\">￥{{pay.money}}</span></p>\n                   <label class=\"checkbox\">\n                      <input type=\"radio\" checked disabled>\n                      <i class=\"icon-hook\"></i>\n                  </label>\n                </li>\n            </ul>\n        </div>   \n\n\n        <div class=\"fixed-bottom  bg-gray\">\n          <div class=\"cal-banner list-box border-top\">\n              <div class=\"list-info-v\">\n                <div>\n                    <p v-if=\"pay.money != 0\">\n                        应付现金：\n                        <span class=\"font-orange\">￥{{pay.money}}</span>\n                    </p>\n                    <p v-if=\"userIntegeral && userIntegeral != 0\">\n                        应付e币：\n                        <i class=\"icon-coin\"></i>\n                        <span class=\"font-orange\">{{pay.ebi}}</span>\n                    </p>\n                </div>\n                  \n              </div>\n              <button class=\"btn-theme\" @click=\"gotoPay1\"> 立即付款</button>\n          </div>\n        </div>\n    </section>\n\n    <!-- 提交遮罩 -->\n    <alert-tip v-show=\"showAlertTip\" :formLoading=\"formLoading\" :alertText=\"alertText\"></alert-tip>\n    \n  </div> \n</template>\n\n<script>\n    import {mapState, mapMutations} from 'vuex'\n    import loading from '/components/loading'\n    import alertTip from '/components/alertTip'\n    import { orderConfirm, addressList, gotoPay } from '/api/api'\n    import { getStore, setStore } from '/utils/storage'\n    import { getImgPath, getUrlPath } from '/components/mixin'\n    export default {\n      name: 'orderConfirm',\n      data () {\n        return {\n            showLoading: false, //显示加载中  \n            proList:[],\n            unCheckCartList: [],\n            address: [],\n            // idList: [],//商品id,商品数量\n            paramsList: [],\n            remark: '',//商家留言\n            curAdsId: 0, //当前地址id\n            total_price2: 0,//应付总额\n            total_ebuy: 0,//可使用e购的商品总额\n            userEbuy: 0, //'e购数量'\n            userIntegeral: 0,//e币数量\n            failPay: false,//支付失败\n            alertText: \"\",\n            showAlertTip: false,\n            flag: false,//true则全部是虚拟物品\n            formLoading: false,//提交中提示\n            pay: {\n              egou: 0,\n              ebi: 0,\n              money: 0\n            }\n\n        }\n      },\n      components: {\n        loading, alertTip\n      }, \n      mixins: [getImgPath, getUrlPath],\n      created() {\n        document.title = \"订单确认\";\n         this._initData();\n      },\n      computed: {\n          ...mapState(['chooseAddress','addressId','cartList'])\n      },\n      methods: {\n       ...mapMutations(['CHOOSE_ADDRESS','INIT_BUYCART']),\n        //获取商品数据\n        _initData() { \n            this.proList = JSON.parse(getStore('buyPro'));\n           // if (this.$route.query.skuId) {//商品详情过来\n           //      this.cartList = JSON.parse(getStore('buyPro'));\n           //  } else {//购物车过来\n           //      this.cartList = JSON.parse(getStore('buyCart'));\n           //  }\n      \n            if(!getStore('unCheckCartList')) {\n                this.cartList.forEach((item, index) => {\n                  if(!item.check) {\n                    this.unCheckCartList.push(item);\n                  }\n                })\n                setStore('unCheckCartList', this.unCheckCartList);\n            }\n           let virtual = 0;//虚拟商品个数\n           this.proList.forEach((item, index) => {\n               if(item.type == 2) {//虚拟商品\n                   virtual++;\n               }\n              let str = item.productId  +':' +item.total;\n              // if(item.check) {\n              this.paramsList.push(str);\n              // } else {\n              //   this.unCheckCartList.push(item);\n              // }\n             \n            });\n            if(virtual == this.proList.length) {\n                this.flag = true;\n            }\n            this._initAddress();  \n            this.calcTotalMoney(); \n            this._getUserTotal(); \n        },\n        //统计总额\n        calcTotalMoney() {\n          this.total_price2 = 0;\n          this.proList && this.proList.forEach((item,i) => {\n            // if(item.check) {\n             this.total_price2 += item.total * item.currCost;\n            // }\n          });\n          return Number(this.total_price2);\n        },\n         //统计可用e购的总额\n        calcTotalEbuy() {\n          this.total_ebuy = 0;\n          this.proList && this.proList.forEach((item,i) => {\n            if(item.ebuy == 1) {\n             this.total_ebuy += item.total * item.currCost;\n            }\n          });\n          return Number(this.total_ebuy);\n        },\n        // 获取e购e币\n        _getUserTotal() {\n           orderConfirm().then(res => {\n              this.userEbuy = res.userEbuy;\n              this.userIntegeral = res.userIntegeral;\n              if(this.userEbuy) {//有e购\n                  if(this.userEbuy >= this.calcTotalEbuy()) {//e购足够\n                      this.pay.egou = this.calcTotalEbuy();\n                      let leaveCost1 = this.calcTotalMoney() - this.calcTotalEbuy();//不能使用e购支付的金额\n                      this.integeralPay(this.userIntegeral, leaveCost1);\n                  } else {//e购不足够\n                      this.pay.egou = this.userEbuy;\n                      let leaveCost2 = this.calcTotalMoney() - this.userEbuy;//不能使用e购支付的金额\n                      this.integeralPay(this.userIntegeral, leaveCost2);\n                  }\n              } else {//e购不存在\n                  this.integeralPay(this.userIntegeral, this.calcTotalMoney());\n              } \n\n           })\n        },\n        //e币支付\n        integeralPay(userIntegeral, total) {\n            if(userIntegeral) {//e币存在\n                if(userIntegeral >= total) {//e币足够\n                    this.pay.ebi = total;\n                } else {//e币不足\n                    this.pay.ebi = userIntegeral;\n                    this.pay.money = total - userIntegeral;\n                }\n            } else {//e币不存在\n                this.pay.money = total;   \n            }\n        },\n        //支付\n        gotoPay1() {\n            if(this.chooseAddress.length === 0) {\n                this.showHideAlert(\"请添加地址\");\n            } else {\n                this.showAlertTip = true;//提交中提示\n                this.formLoading = true;\n                this.alertText = '提交中，请稍候'; \n                let str = \"{\" + this.paramsList.join(\",\") + \"}\";\n            \n                gotoPay({params:{\n                    addressid: this.curAdsId, \n                    params:str, \n                    remark: this.remark\n                }}).then(res => {\n                    \n                    if(res.success == false) {\n                        \n                        this.showHideAlert(res.msg);\n                    } else if(Number(res.attributes.wxPayTotal) > 0) {\n                        // console.log(res.attributes.payOrderId)\n                        window.location.href = this.getUrlPath('/pay.html?orderNo='+res.attributes.payOrderId);\n                        // window.location.href = \"https://equan.yesm.cn/equan-wxweb/wxhtml/pay.html?orderNo=\"+res.attributes.payOrderId;\n                        setStore('buyCart', getStore('unCheckCartList'));\n                        this.INIT_BUYCART();\n                    } else {\n                        this.$router.push('/result');\n                        setStore('buyCart', getStore('unCheckCartList'));\n                        this.INIT_BUYCART();\n                        // this.$router.push({path:'/pay', query: {orderNo: res.attributes.payOrderId}});\n                    }\n                \n                })\n            }\n         \n        },\n        // 获取地址\n        _initAddress() {\n          if(this.chooseAddress.length === 0) {//第一次进入\n              addressList().then(res => {\n                  this.address = res.resultList;\n                  if(this.address.length > 0){\n                      this.address.forEach((item, i) => {\n                          if(item.isdefault == 1){\n                              this.CHOOSE_ADDRESS({address:item, id:item.id, index:i});\n                               this.curAdsId = item.id; \n                          }\n                      });\n                  }\n              })\n            } \n            else {\n               this.curAdsId = this.addressId; \n            }\n        },\n         //显示隐藏提示框\n        showHideAlert(text) { \n            this.formLoading = false;\n            this.showAlertTip = true;\n            this.alertText = text;\n            setTimeout(() => {\n                this.showAlertTip = false;\n            }, 1000);\n        }\n\n      },\n      watch: {\n        '$route':'_initData'\n      }\n     \n    }\n</script>\n\n<!-- Add \"scoped\" attribute to limit CSS to this component only -->\n<style lang=\"scss\" scoped>\n@import \"../../assets/scss/var.scss\";\n.logistics {\n  // position: relative;\n  &:after {\n      display: block;\n      content: \"\";\n      height: 3px;\n      background: url(../../assets/images/addLine.png) repeat-x;\n      background-size: 85px;\n  }\n}\n.confirm-order {\n    .list-box {\n      .list-box {\n        align-items: flex-start;\n      }\n    }\n}\n.txtArea {\n  background-color: #f4f4f4;\n  padding: $gauge;\n  margin: $gauge auto;\n  width: pxTorem(702);\n  display: block;\n  border-radius: 6px;\n  line-height: 20px;\n}\n.top-text {margin-bottom: 15px;}\n.icon-coin {font-size: 15px;}\n</style>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/order/orderConfirm.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"orderConfirm banner-b\"},[(_vm.showLoading)?_c('loading'):_vm._e(),_vm._v(\" \"),(!_vm.showLoading)?_c('section',[_c('div',{staticClass:\"logistics bg-show\"},[_c('router-link',{staticClass:\"list-box\",attrs:{\"to\":\"/chooseAddress\"}},[_c('i',{staticClass:\"icon-map font-gray pdr\"}),_vm._v(\" \"),(_vm.chooseAddress.length === 0)?_c('h5',{staticClass:\"list-info-v pdt pdb\"},[_vm._v(\"请添加一个收货地址\")]):_c('div',{staticClass:\"list-info-v\"},[_c('div',[_c('h4',[_c('span',{staticClass:\"pdr\"},[_vm._v(_vm._s(_vm.chooseAddress.username))]),_vm._v(\" \"),_c('span',[_vm._v(_vm._s(_vm.chooseAddress.mobile))])]),_vm._v(\" \"),_c('p',{staticClass:\"font-gray nowrap-2\"},[_vm._v(_vm._s(_vm.chooseAddress.province)+_vm._s(_vm.chooseAddress.city)+_vm._s(_vm.chooseAddress.district)+_vm._s(_vm.chooseAddress.detailaddress))])])]),_vm._v(\" \"),_c('i',{staticClass:\"icon-right\"})])],1),_vm._v(\" \"),_c('ul',{staticClass:\"confirm-order\"},_vm._l((_vm.proList),function(item,i){return _c('li',{key:i,staticClass:\"list-box border-bottom\"},[_c('img',{staticClass:\"list-img\",attrs:{\"src\":_vm.getImgPath(item.productImg)}}),_vm._v(\" \"),_c('div',{staticClass:\"list-info-v\"},[_c('div',[_c('div',{staticClass:\"list-box\"},[_c('div',{staticClass:\"list-info-h\"},[_c('h5',{staticClass:\"nowrap-2 top-text\"},[_vm._v(_vm._s(item.productName))])]),_vm._v(\" \"),_c('h5',{staticClass:\"pdl\"},[_vm._v(\"X\"+_vm._s(item.total))])]),_vm._v(\" \"),_c('div',{staticClass:\"price-big\"},[_c('span',{staticClass:\"font-orange\"},[_c('i',{staticClass:\"icon-coin\"}),_vm._v(_vm._s(item.currCost))]),_vm._v(\" \"),_c('s',{staticClass:\"font-gray\"},[_vm._v(\"市场价：￥\"+_vm._s(item.currPrice))])])])])])})),_vm._v(\" \"),_c('div',{staticClass:\"bg-mgShow\"},[_vm._m(0),_vm._v(\" \"),_c('textarea',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.remark),expression:\"remark\"}],staticClass:\"txtArea\",attrs:{\"cols\":\"30\",\"rows\":\"3\",\"placeholder\":\"请输入留言\"},domProps:{\"value\":(_vm.remark)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.remark=$event.target.value}}})]),_vm._v(\" \"),(_vm.pay.egou != 0)?_c('div',{staticClass:\"bg-mgShow\"},[_vm._m(1),_vm._v(\" \"),_c('ul',[_c('li',{staticClass:\"list-box\"},[_c('p',{staticClass:\"list-info-h\"},[_vm._v(\"可用e购账户抵扣\"),_c('span',{staticClass:\"font-red\"},[_vm._v(_vm._s(_vm.pay.egou))]),_vm._v(\"元\")]),_vm._v(\" \"),_vm._m(2)])])]):_vm._e(),_vm._v(\" \"),(_vm.pay.money != 0 || _vm.pay.ebi != 0)?_c('div',{staticClass:\"bg-mgShow\"},[_vm._m(3),_vm._v(\" \"),_c('ul',[(_vm.pay.ebi != 0)?_c('li',{staticClass:\"list-box\"},[_c('p',{staticClass:\"list-info-h\"},[_vm._v(\"e币支付\"),_c('span',{staticClass:\"pdr font-orange\"},[_c('i',{staticClass:\"icon-coin\"}),_vm._v(_vm._s(_vm.pay.ebi))])]),_vm._v(\" \"),_vm._m(4)]):_vm._e(),_vm._v(\" \"),(_vm.pay.money != 0)?_c('li',{staticClass:\"list-box\"},[_c('p',{staticClass:\"list-info-h\"},[_vm._v(\"微信支付\"),_c('span',{staticClass:\" font-orange\"},[_vm._v(\"￥\"+_vm._s(_vm.pay.money))])]),_vm._v(\" \"),_vm._m(5)]):_vm._e()])]):_vm._e(),_vm._v(\" \"),_c('div',{staticClass:\"fixed-bottom  bg-gray\"},[_c('div',{staticClass:\"cal-banner list-box border-top\"},[_c('div',{staticClass:\"list-info-v\"},[_c('div',[(_vm.pay.money != 0)?_c('p',[_vm._v(\"\\n                      应付现金：\\n                      \"),_c('span',{staticClass:\"font-orange\"},[_vm._v(\"￥\"+_vm._s(_vm.pay.money))])]):_vm._e(),_vm._v(\" \"),(_vm.userIntegeral && _vm.userIntegeral != 0)?_c('p',[_vm._v(\"\\n                      应付e币：\\n                      \"),_c('i',{staticClass:\"icon-coin\"}),_vm._v(\" \"),_c('span',{staticClass:\"font-orange\"},[_vm._v(_vm._s(_vm.pay.ebi))])]):_vm._e()])]),_vm._v(\" \"),_c('button',{staticClass:\"btn-theme\",on:{\"click\":_vm.gotoPay1}},[_vm._v(\" 立即付款\")])])])]):_vm._e(),_vm._v(\" \"),_c('alert-tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAlertTip),expression:\"showAlertTip\"}],attrs:{\"formLoading\":_vm.formLoading,\"alertText\":_vm.alertText}})],1)}\nvar staticRenderFns = [function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-bar border-bottom\"},[_c('h5',[_vm._v(\"给卖家留言\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-bar border-bottom\"},[_c('h5',[_vm._v(\"使用e购账户\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"checkbox\"},[_c('input',{attrs:{\"type\":\"radio\",\"checked\":\"\",\"disabled\":\"\"}}),_vm._v(\" \"),_c('i',{staticClass:\"icon-hook\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"title-bar border-bottom\"},[_c('h5',[_vm._v(\"支付方式\")])])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"checkbox\"},[_c('input',{attrs:{\"type\":\"radio\",\"checked\":\"\",\"disabled\":\"\"}}),_vm._v(\" \"),_c('i',{staticClass:\"icon-hook\"})])},function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('label',{staticClass:\"checkbox\"},[_c('input',{attrs:{\"type\":\"radio\",\"checked\":\"\",\"disabled\":\"\"}}),_vm._v(\" \"),_c('i',{staticClass:\"icon-hook\"})])}]\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-ed21767e\",\"hasScoped\":true,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/order/orderConfirm.vue\n// module id = null\n// module chunks = ","function injectStyle (ssrContext) {\n  require(\"!!../../../node_modules/extract-text-webpack-plugin/dist/loader.js?{\\\"omit\\\":1,\\\"remove\\\":true,\\\"publicPath\\\":\\\"../../\\\"}!vue-style-loader!css-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/style-compiler/index?{\\\"vue\\\":true,\\\"id\\\":\\\"data-v-ed21767e\\\",\\\"scoped\\\":true,\\\"hasInlineConfig\\\":false}!sass-loader?{\\\"sourceMap\\\":true}!../../../node_modules/vue-loader/lib/selector?type=styles&index=0!./orderConfirm.vue\")\n}\nvar normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderConfirm.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./orderConfirm.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-ed21767e\\\",\\\"hasScoped\\\":true,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./orderConfirm.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = injectStyle\n/* scopeId */\nvar __vue_scopeId__ = \"data-v-ed21767e\"\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/order/orderConfirm.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}