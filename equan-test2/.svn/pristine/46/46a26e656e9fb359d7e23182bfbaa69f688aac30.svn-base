webpackJsonp([28],{QlWu:function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});var o=i("BzkK"),s=i("P9l9"),l=i("VKKs"),n={name:"register",data:function(){return{mobileNum:null,computedTime:0,validate_token:null,mobileCode:null,formLoading:!1,alertText:"",showAlertTip:!1,token:"",arr:[]}},components:{alertTip:o.a},created:function(){document.title="用户注册",this._initData()},computed:{rightMobile:function(){return/^1\d{10}$/.test(this.mobileNum)},rightCode:function(){return/^\d{6}$/gi.test(this.mobileCode)}},methods:{_initData:function(){var e=this;Object(s.G)({params:{type:1,__sid:"1bc2200ed18649f8b5bafdc096ee622c"}}).then(function(t){200==t.resultCode?(e.token=t.token,localStorage.setItem("token",e.token)):e.showHideAlert(t.resultMsg)})},getVerifyCode:function(){var e=this;""!=this.token?this.rightMobile&&Object(s.H)({params:{mobile:this.mobileNum,token:this.token,type:"ESHOPREGISTER",checkMobile:"yes"}}).then(function(t){e.showHideAlert(t.resultMsg),200===t.resultCode&&(e.computedTime=60,e.timer=setInterval(function(){e.computedTime--,0==e.computedTime&&clearInterval(e.timer)},1e3))}):this.showHideAlert("系统异常，稍后再试.")},mobileLogin:function(){var e=this;this.rightCode?(this.showAlertTip=!0,this.formLoading=!0,this.alertText="提交中，请稍候",Object(s.I)({params:{mobile:this.mobileNum,code:this.mobileCode,type:"ESHOPREGISTER"}}).then(function(t){e.showHideAlert(t.resultMsg),200==t.resultCode&&setTimeout(function(){Object(l.c)("mobile",e.mobileNum),e.$router.push("/home")},1e3)})):this.showHideAlert("短信验证码不正确")},showHideAlert:function(e){var t=this;this.showAlertTip=!0,this.alertText=e,setTimeout(function(){t.showAlertTip=!1},1e3)}}},r={render:function(){var e=this,t=e.$createElement,i=e._self._c||t;return i("div",{staticClass:"login"},[i("form",{attrs:{action:"#"}},[i("ul",{staticClass:"form-list border-list"},[i("li",[i("label",[e._v("登录账户")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobileNum,expression:"mobileNum"}],attrs:{name:"mobile",maxlength:"11",type:"tel",placeholder:"请输入注册的手机号"},domProps:{value:e.mobileNum},on:{input:function(t){t.target.composing||(e.mobileNum=t.target.value)}}})]),e._v(" "),i("li",[i("label",[e._v("短信验证码")]),e._v(" "),i("input",{directives:[{name:"model",rawName:"v-model",value:e.mobileCode,expression:"mobileCode"}],attrs:{type:"tel",placeholder:"填写手机验证码",name:"mobileCode",maxlength:"6"},domProps:{value:e.mobileCode},on:{input:function(t){t.target.composing||(e.mobileCode=t.target.value)}}}),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:!e.computedTime,expression:"!computedTime"}],staticClass:"btn-getCode",class:{disbtn:!e.rightMobile},on:{click:function(t){return t.preventDefault(),e.getVerifyCode(t)}}},[e._v("获取验证码")]),e._v(" "),i("button",{directives:[{name:"show",rawName:"v-show",value:e.computedTime,expression:"computedTime"}],staticClass:"btn-getCode disbtn",on:{click:function(t){return t.preventDefault(),e.getVerifyCode(t)}}},[e._v("已发送("+e._s(e.computedTime)+"s)")])])]),e._v(" "),i("div",{staticClass:"btn"},[i("a",{staticClass:"btn-pure-theme",on:{click:e.mobileLogin}},[e._v("登录")])])]),e._v(" "),i("alert-tip",{directives:[{name:"show",rawName:"v-show",value:e.showAlertTip,expression:"showAlertTip"}],attrs:{formLoading:e.formLoading,alertText:e.alertText}})],1)},staticRenderFns:[]},a=i("VU/8")(n,r,!1,null,null,null);t.default=a.exports}});
//# sourceMappingURL=28.74347313c1d876668c4c.js.map