webpackJsonp([15],{"/nkJ":function(t,e){},jY8t:function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var s=i("mvHQ"),a=i.n(s),n=i("woOf"),o=i.n(n),r=i("Gu7T"),l=i.n(r),h=i("P9l9"),c=i("BzkK"),d=i("NXlk"),m={data:function(){return{ebi:0,ebuy:0,expireIntegral:0,eIndex:0,eList:["e币明细","e购明细"],monthList:[],totalList:[],monthIdx:0,statisticsData:{},showDialog:!1,showAlertTip:!1,beginTime:"",endTime:"",beginTime1:"",endTime1:"",queryType:"ecoin",queryTime:"",isLastPage:!1,page:1,isFixed:[],loadmore:!0,isLoading:!0,noData:!1}},components:{alertTip:c.a,loadMore:d.a},mounted:function(){document.title="我的账户",this._initData(),this.$nextTick(function(){window.scrollTo(0,1),window.scrollTo(0,0)})},methods:{_initData:function(){var t=this;Object(h.L)({params:{startDate:this.beginTime1,endDate:this.endTime1,queryTime:this.queryTime,queryType:this.queryType}}).then(function(e){t.ebi=e.data.totalECoin,t.ebuy=e.data.totalEBuy,t.expireIntegral=e.data.expireIntegral,t.$route.query.type?t.eIndex=Number(t.$route.query.type):t.eIndex=Number(0),t.getOtherList(t.eIndex)})},getOtherList:function(t){var e=this;this.eIndex=t,this.queryType=0==t?"ecoin":"ebuy",this.beginTime1="",this.endTime1="";var i={params:{startDate:this.beginTime1,endDate:this.endTime1,pageNo:1,queryType:this.queryType,pageSize:10}};Object(h.b)(i).then(function(t){var i=t.data.resultList;e.resetList(i[0].title)})},_getAccountList:function(t){var e=this,i={params:{startDate:this.beginTime1,endDate:this.endTime1,pageNo:this.page,queryType:this.queryType,pageSize:10}};Object(h.b)(i).then(function(i){var s=i.data.resultList;if(e.isLastPage=i.data.isLastPage,e.totalList=t?[].concat(l()(e.totalList),l()(s)):s,i.result)if(e.beginTime1&&e.endTime1)e.monthList[0].list=e.totalList;else if(!t&&s.length<=1)e.monthList[0].list=s;else if(1==s.length){var a=e.monthList[e.monthIdx].list.length;e._getMonthList(e.monthList[e.monthIdx].list[a-1].title,s[0].title,s[0])}else for(var n=1;n<s.length;n++)1==n&&e.monthList[e.monthIdx].list.push(s[0]),e._getMonthList(s[n-1].title,s[n].title,s[n]);else e.showHideAlert(i.resultMsg);e.isLoading=!1,0==e.totalList.length?e.loadmore=!1:e.isLastPage?e.noData=!0:e.noData=!1})},_getMonthList:function(t,e,i){t!=e&&(this.monthList.push(this.statisticsData[e]),this.monthIdx++,this.monthList[this.monthIdx]=o()(this.monthList[this.monthIdx],{list:[],monthName:e})),this.monthList[this.monthIdx].list.push(i)},checkData:function(){""===this.endTime||""===this.beginTime?this.showHideAlert("日期不能为空"):this.endTime<=this.beginTime?this.showHideAlert("结束日期必须大于开始日期"):(this.beginTime1=this.beginTime,this.endTime1=this.endTime,this.showDialog=!1,this.resetList(this.beginTime1+"至"+this.endTime1))},resetList:function(t){var e=this;this.page=1,this.loadmore=!0,this.isLoading=!0,this.noData=!1,this.monthList=[],this.isFixed=[],this.monthIdx=0,Object(h.L)({params:{startDate:this.beginTime1,endDate:this.endTime1,queryTime:this.queryTime,queryType:this.queryType}}).then(function(i){"{}"!=a()(i.data.monthIntegralStatisticsData)?(e.statisticsData=i.data.monthIntegralStatisticsData,e.monthList[0]=e.statisticsData[t],e.monthList[0]=o()(e.monthList[0],{list:[],monthName:t})):e.monthList[0]=o()({consumeTotal:0,incomeTotal:0},{list:[],monthName:t}),e.isFixed.push(!1),e.totalList=[],e._getAccountList()})},loadMore:function(){this.isLastPage?(this.isLoading=!1,this.noData=!0):(this.page++,this.isLoading=!0,this.noData=!1,this._getAccountList(!0))},showHideAlert:function(t){var e=this;this.showAlertTip=!0,this.alertText=t,setTimeout(function(){e.showAlertTip=!1},1500)}}},u={render:function(){var t=this,e=t.$createElement,s=t._self._c||e;return s("div",{staticClass:"banner-account",attrs:{id:"accountList"}},[s("div",{ref:"banner",staticClass:"credit-top center-text"},[s("div",{staticClass:"credit-num"},[s("p",[t._v("当前e"+t._s(0===t.eIndex?"币":"购")+" 总额")]),t._v(" "),s("h1",[t._v(t._s(0===t.eIndex?t.ebi:t.ebuy))]),t._v(" "),0===t.eIndex?s("p",[s("i",{staticClass:"icon-clock"}),t._v("您有"+t._s(t.expireIntegral)+"e币将在今年12月31日到期")]):t._e()]),t._v(" "),s("div",{staticClass:"two-btn"},[s("router-link",{staticClass:"btn-border btn-recharge",attrs:{to:{path:"/ticket",query:{tckType:1}}}},[t._v("e"+t._s(0===t.eIndex?"币":"购")+"充值")]),t._v(" "),0===t.eIndex?s("router-link",{staticClass:"btn-border",attrs:{to:"/redpacketCharge"}},[t._v("红包兑换")]):t._e()],1)]),t._v(" "),t._l(t.monthList,function(e,i){return s("div",{key:i,staticClass:"credit-detail"},[s("div",{staticClass:"account-title list-box bg-gray"},[s("div",{staticClass:"list-info-v"},[s("h5",[t._v(t._s(e.monthName))]),t._v(" "),s("div",{staticClass:"font-gray"},[s("span",{staticStyle:{"margin-right":"50px"}},[t._v("收入："+t._s(e.incomeTotal))]),t._v(" "),s("span",[t._v("支出："+t._s(e.consumeTotal))])])]),t._v(" "),s("i",{staticClass:"icon-date",on:{click:function(e){t.showDialog=!t.showDialog}}})]),t._v(" "),s("ul",t._l(e.list,function(e,i){return s("li",{key:i,staticClass:"border-bottom"},[s("router-link",{staticClass:"list-box",attrs:{to:{path:"/account/accountDetail",query:{id:e.id,type:t.eIndex,actionType:e.actionType}}}},[s("div",{staticClass:"list-info-v"},[s("h5",[t._v(t._s(e.actionTitle))]),t._v(" "),s("p",[t._v(t._s(e.opTimeString))])]),t._v(" "),0===t.eIndex?s("h5",{class:[1==e.opType?"plus":"minus"]},[t._v(t._s(1==e.opType?"+":"-")+t._s(e.ecoin))]):t._e(),t._v(" "),1===t.eIndex?s("h5",{class:[1==e.opType?"plus":"minus"]},[t._v(t._s(1==e.opType?"+":"-")+t._s(e.ebuy))]):t._e()])],1)}))])}),t._v(" "),t.loadmore?s("load-more",{attrs:{isLoading:t.isLoading,noData:t.noData},on:{loadMore:t.loadMore}}):t._e(),t._v(" "),0!=t.totalList.length||t.isLoading?t._e():s("div",{staticClass:"nothing"},[s("img",{attrs:{src:i("pkH0")}}),t._v(" "),s("p",{staticClass:"font-gray"},[t._v("暂无数据")])]),t._v(" "),s("div",{staticClass:"fixed-bottom"},[s("ul",{staticClass:"flex-layout nav-bar border-top"},t._l(t.eList,function(e,i){return s("li",{key:i,class:["border-right",t.eIndex===i?"active":""],on:{click:function(e){t.getOtherList(i)}}},[s("a",[t._v(t._s(e))])])}))]),t._v(" "),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[t.showDialog?s("div",{staticClass:"time-list fixed-body"},[s("a",{staticClass:"list-box border-bottom",on:{click:function(e){t.showDialog=!t.showDialog}}},[s("i",{staticClass:"icon-left"}),t._v(" "),s("span",{staticClass:"font-gray"},[t._v("返回")])]),t._v(" "),s("ul",{staticClass:"border-list"},[s("li",[s("label",{attrs:{for:"beginTime"}},[t._v("选择开始时间")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.beginTime,expression:"beginTime"}],attrs:{type:"date",name:"beginTime",placeholder:"请输入查询时间段"},domProps:{value:t.beginTime},on:{input:function(e){e.target.composing||(t.beginTime=e.target.value)}}}),t._v(" "),s("i",{staticClass:"icon-right"})]),t._v(" "),s("li",[s("label",{attrs:{for:"endTime"}},[t._v("选择结束时间")]),t._v(" "),s("input",{directives:[{name:"model",rawName:"v-model",value:t.endTime,expression:"endTime"}],attrs:{type:"date",name:"endTime",placeholder:"请输入查询时间段"},domProps:{value:t.endTime},on:{input:function(e){e.target.composing||(t.endTime=e.target.value)}}}),t._v(" "),s("i",{staticClass:"icon-right"})])]),t._v(" "),s("div",{staticClass:"btn"},[s("p",{staticClass:"btn-pure-theme",on:{click:t.checkData}},[t._v("查询")])])]):t._e()]),t._v(" "),t.showAlertTip?s("alert-tip",{attrs:{"alert-text":t.alertText}}):t._e(),t._v(" "),t._m(0),t._v(" "),s("transition",{attrs:{name:"router-slid",mode:"out-in"}},[s("router-view")],1)],2)},staticRenderFns:[function(){var t=this.$createElement,e=this._self._c||t;return e("div",{staticClass:"fixed-right"},[e("a",{attrs:{href:"#accountList"}},[e("i",{staticClass:"icon-top"})])])}]};var v=i("VU/8")(m,u,!1,function(t){i("/nkJ")},"data-v-b7112502",null);e.default=v.exports}});
//# sourceMappingURL=15.17a20f396de12bfcaa9f.js.map