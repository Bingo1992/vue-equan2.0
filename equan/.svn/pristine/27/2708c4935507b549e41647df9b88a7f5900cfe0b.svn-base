{"version":3,"sources":["webpack:///src/pages/login/login.vue","webpack:///./src/pages/login/login.vue?14a6","webpack:///./src/pages/login/login.vue"],"names":["login","name","data","mobileNum","computedTime","validate_token","mobileCode","formLoading","alertText","showAlertTip","token","arr","components","alertTip","created","document","title","this","_initData","computed","rightMobile","test","rightCode","methods","_this","Object","api","params","type","__sid","then","res","resultCode","localStorage","setItem","showHideAlert","resultMsg","getVerifyCode","_this2","mobile","checkMobile","timer","setInterval","clearInterval","mobileLogin","_this3","code","setTimeout","$router","push","text","_this4","login_login","render","_vm","_h","$createElement","_c","_self","staticClass","attrs","action","_v","directives","rawName","value","expression","maxlength","placeholder","domProps","on","input","$event","target","composing","class","disbtn","click","preventDefault","_s","staticRenderFns","Component","__webpack_require__","normalizeComponent","__webpack_exports__"],"mappings":"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","file":"static/js/24.00ba64979778698c01fc.js","sourcesContent":["<template>\n  <div class=\"login\">\n    <form action=\"#\">\n        <ul class=\"form-list border-list\">\n            <li>\n                <label>登录账户</label>\n                <input v-model=\"mobileNum\" name=\"mobile\" maxlength=\"11\" type=\"tel\" placeholder=\"请输入注册的手机号\">\n            </li>\n\n            <li>\n                <label>短信验证码</label>\n                <input type=\"tel\" placeholder=\"填写手机验证码\" name=\"mobileCode\" maxlength=\"6\" v-model=\"mobileCode\">\n                <button @click.prevent=\"getVerifyCode\" class=\"btn-getCode\" :class=\"{disbtn:!rightMobile}\" v-show=\"!computedTime\">获取验证码</button>\n                <button @click.prevent=\"getVerifyCode\" class=\"btn-getCode disbtn\" v-show=\"computedTime\">已发送({{computedTime}}s)</button>\n            </li>\n        </ul>\n      <!--   <div class=\"clearfix pdr\">\n            <a class=\"font-gray fr\">忘记密码？</a>\n        </div> -->\n        <div class=\"btn\">\n            <a class=\"btn-pure-theme\" @click=\"mobileLogin\">登录</a>\n        </div>\n        \n    </form>\n\n    <alert-tip v-show=\"showAlertTip\" :formLoading=\"formLoading\" :alertText=\"alertText\"></alert-tip>\n   \n  </div> \n</template>\n\n<script>\nimport alertTip from '/components/alertTip'\nimport {register, sendCode, sendRegister} from '/api/api'\nexport default {\n  name: 'register',\n  data () {\n    return {\n        mobileNum: null,//手机号\n        computedTime: 0, //倒数记时\n        validate_token: null, //获取短信时返回的验证值，登陆时需要\n        mobileCode: null, //验证码\n        formLoading: false,//提交中提示\n        alertText: \"\",\n        showAlertTip: false,\n        token: '',\n        arr:[]\n    }\n  },\n  components: { \n    alertTip\n  },\n  created() {\n    document.title = \"用户注册\";\n    this._initData();\n  },\n  computed: {\n    //判断手机号码\n    rightMobile() {\n        return  /^1\\d{10}$/.test(this.mobileNum)\n     },\n     //判断验证码\n    rightCode() {\n        return /^\\d{6}$/gi.test(this.mobileCode)\n    }\n  },\n  methods: {\n    // ...mapMutations([\n    //     'RECORD_USERINFO'\n    // ]),\n    // ...mapState([\n    //     'userInfo'\n    // ]),\n    _initData() {\n        register({params:{type: 1, __sid:'1bc2200ed18649f8b5bafdc096ee622c'}}).then(res => {\n            if(res.resultCode == 200) {\n                this.token = res.token;\n                localStorage.setItem('token', this.token);\n            } else {\n                this.showHideAlert(res.resultMsg);\n             }   \n        });\n            \n    },\n    //获取短信验证码\n    getVerifyCode(){\n        if(this.token == '') {\n            this.showHideAlert('系统异常，稍后再试.');\n            return;\n        }\n        if(this.rightMobile) {//倒计时\n            //发送验证码\n            sendCode({params: {\n                mobile: this.mobileNum,\n                token: this.token,\n                type: 'ESHOPREGISTER',\n                checkMobile: 'yes'\n            }}).then(res => {\n                this.showHideAlert(res.resultMsg);//提示发送成功或失败\n                if(res.resultCode === 200) {\n                    this.computedTime = 60;\n                    this.timer = setInterval(() => {\n                        this.computedTime --;\n                        if (this.computedTime == 0) {\n                            clearInterval(this.timer)\n                        }\n                    }, 1000);\n                }\n            });\n\n        }\n\n    },\n    //发送登陆信息\n    mobileLogin(){\n        // if (!this.rightMobile) {\n        //    this.showHideAlert('手机号码不正确');\n        //     return\n        // }else \n        if(!this.rightCode){\n            this.showHideAlert('短信验证码不正确');\n            return\n        } else {\n            this.showAlertTip = true;//提交中提示\n            this.formLoading = true;\n            this.alertText = '提交中，请稍候'; \n            sendRegister({params:{\n                mobile: this.mobileNum,\n                code: this.mobileCode,\n                type: 'ESHOPREGISTER'\n            }}).then(res => {\n                this.showHideAlert(res.resultMsg);\n                if(res.resultCode == 200) {\n                    setTimeout(() => {\n                        this.$router.push('/home');\n                    },1000);\n                } \n            })\n        }\n  \n        // //如果返回的值不正确，则弹出提示框，返回的值正确则返回上一页\n        // if (!this.userInfo.user_id) {\n        //     alert(this.userInfo.message);\n        // }else{\n        //     this.RECORD_USERINFO(this.userInfo);\n        //     this.$router.go(-1);\n        // }\n    },\n    //显示隐藏提示框\n    showHideAlert(text) { \n        this.showAlertTip = true;\n        this.alertText = text;\n        setTimeout(() => {\n            this.showAlertTip = false;\n        }, 1000);\n    }\n\n  }\n  \n}\n</script>\n\n\n\n// WEBPACK FOOTER //\n// src/pages/login/login.vue","var render = function () {var _vm=this;var _h=_vm.$createElement;var _c=_vm._self._c||_h;return _c('div',{staticClass:\"login\"},[_c('form',{attrs:{\"action\":\"#\"}},[_c('ul',{staticClass:\"form-list border-list\"},[_c('li',[_c('label',[_vm._v(\"登录账户\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mobileNum),expression:\"mobileNum\"}],attrs:{\"name\":\"mobile\",\"maxlength\":\"11\",\"type\":\"tel\",\"placeholder\":\"请输入注册的手机号\"},domProps:{\"value\":(_vm.mobileNum)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mobileNum=$event.target.value}}})]),_vm._v(\" \"),_c('li',[_c('label',[_vm._v(\"短信验证码\")]),_vm._v(\" \"),_c('input',{directives:[{name:\"model\",rawName:\"v-model\",value:(_vm.mobileCode),expression:\"mobileCode\"}],attrs:{\"type\":\"tel\",\"placeholder\":\"填写手机验证码\",\"name\":\"mobileCode\",\"maxlength\":\"6\"},domProps:{\"value\":(_vm.mobileCode)},on:{\"input\":function($event){if($event.target.composing){ return; }_vm.mobileCode=$event.target.value}}}),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(!_vm.computedTime),expression:\"!computedTime\"}],staticClass:\"btn-getCode\",class:{disbtn:!_vm.rightMobile},on:{\"click\":function($event){$event.preventDefault();return _vm.getVerifyCode($event)}}},[_vm._v(\"获取验证码\")]),_vm._v(\" \"),_c('button',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.computedTime),expression:\"computedTime\"}],staticClass:\"btn-getCode disbtn\",on:{\"click\":function($event){$event.preventDefault();return _vm.getVerifyCode($event)}}},[_vm._v(\"已发送(\"+_vm._s(_vm.computedTime)+\"s)\")])])]),_vm._v(\" \"),_c('div',{staticClass:\"btn\"},[_c('a',{staticClass:\"btn-pure-theme\",on:{\"click\":_vm.mobileLogin}},[_vm._v(\"登录\")])])]),_vm._v(\" \"),_c('alert-tip',{directives:[{name:\"show\",rawName:\"v-show\",value:(_vm.showAlertTip),expression:\"showAlertTip\"}],attrs:{\"formLoading\":_vm.formLoading,\"alertText\":_vm.alertText}})],1)}\nvar staticRenderFns = []\nvar esExports = { render: render, staticRenderFns: staticRenderFns }\nexport default esExports\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./node_modules/vue-loader/lib/template-compiler?{\"id\":\"data-v-f45dd72c\",\"hasScoped\":false,\"transformToRequire\":{\"video\":[\"src\",\"poster\"],\"source\":\"src\",\"img\":\"src\",\"image\":\"xlink:href\"},\"buble\":{\"transforms\":{}}}!./node_modules/vue-loader/lib/selector.js?type=template&index=0!./src/pages/login/login.vue\n// module id = null\n// module chunks = ","var normalizeComponent = require(\"!../../../node_modules/vue-loader/lib/component-normalizer\")\n/* script */\nexport * from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\nimport __vue_script__ from \"!!babel-loader!../../../node_modules/vue-loader/lib/selector?type=script&index=0!./login.vue\"\n/* template */\nimport __vue_template__ from \"!!../../../node_modules/vue-loader/lib/template-compiler/index?{\\\"id\\\":\\\"data-v-f45dd72c\\\",\\\"hasScoped\\\":false,\\\"transformToRequire\\\":{\\\"video\\\":[\\\"src\\\",\\\"poster\\\"],\\\"source\\\":\\\"src\\\",\\\"img\\\":\\\"src\\\",\\\"image\\\":\\\"xlink:href\\\"},\\\"buble\\\":{\\\"transforms\\\":{}}}!../../../node_modules/vue-loader/lib/selector?type=template&index=0!./login.vue\"\n/* template functional */\nvar __vue_template_functional__ = false\n/* styles */\nvar __vue_styles__ = null\n/* scopeId */\nvar __vue_scopeId__ = null\n/* moduleIdentifier (server only) */\nvar __vue_module_identifier__ = null\nvar Component = normalizeComponent(\n  __vue_script__,\n  __vue_template__,\n  __vue_template_functional__,\n  __vue_styles__,\n  __vue_scopeId__,\n  __vue_module_identifier__\n)\n\nexport default Component.exports\n\n\n\n//////////////////\n// WEBPACK FOOTER\n// ./src/pages/login/login.vue\n// module id = null\n// module chunks = "],"sourceRoot":""}