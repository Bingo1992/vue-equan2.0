webpackJsonp([8],{"3uSt":function(t,s,a){"use strict";Object.defineProperty(s,"__esModule",{value:!0});var e=a("Gu7T"),i=a.n(e),o=a("Dd8w"),r=a.n(o),n=a("NYxO"),c=a("P9l9"),l=a("mzkE"),h=a("u+Fy"),d={name:"sortTabs",data:function(){return{sortList1:[{name:"全部分类",value:""},{name:"汽车用品",value:1},{name:"超市卡券",value:2},{name:"汽车打蜡",value:3},{name:"生活服务",value:4}],sortList2:[{name:"价格从高到低",value:1},{name:"价格从低到高",value:2}],sortPriceIndex:null,odByName:"价格",odByVal:"",lowPrice:"",highPrice:"",showAlertTip:!1}},props:["sortIndex"],components:{alertTip:a("BzkK").a},computed:r()({},Object(n.c)(["sortProIndex"])),methods:r()({},Object(n.b)(["CHOOSE_PROSORT"]),{closeDialog:function(){this.$emit("closeDialog")},getProSort:function(t,s,a){this.CHOOSE_PROSORT({sortPro:t,index:a}),this.$emit("sortType",s),this.$emit("closeDialog")},getPriceSort:function(t,s,a){this.sortPriceIndex=a,this.odByName=t,this.odByVal=s},confirmBtn:function(){Number(this.lowPrice)>Number(this.highPrice)?this.showHideAlert("最低价不能高于最高价"):(this.$emit("sortPrice",this.odByName,this.odByVal,this.lowPrice,this.highPrice),this.$emit("closeDialog"))},resetBtn:function(){this.odByName="价格",this.lowPrice="",this.highPrice="",this.odByVal="",this.sortPriceIndex=null,this.$emit("sortPrice",this.odByName,this.odByVal,this.lowPrice,this.highPrice),this.$emit("closeDialog")},showHideAlert:function(t){var s=this;this.showAlertTip=!0,this.alertText=t,setTimeout(function(){s.showAlertTip=!1},1500)}})},u={render:function(){var t=this,s=t.$createElement,a=t._self._c||s;return a("div",[0==t.sortIndex?a("div",{staticClass:"sort-box"},[a("ul",{staticClass:"box-cnt"},t._l(t.sortList1,function(s,e){return a("li",{class:{active:t.sortProIndex==e},on:{click:function(a){t.getProSort(s.name,s.value,e)}}},[a("span",[t._v(t._s(s.name))])])}))]):t._e(),t._v(" "),1==t.sortIndex?a("div",{staticClass:"sort-box"},[a("div",{staticClass:"box-cnt"},[a("div",[a("span",[t._v("价格区间")]),t._v(" "),a("div",{staticClass:"price-zone"},[a("input",{directives:[{name:"model",rawName:"v-model",value:t.lowPrice,expression:"lowPrice"}],staticClass:"low",attrs:{type:"number",placeholder:"最低价格"},domProps:{value:t.lowPrice},on:{input:function(s){s.target.composing||(t.lowPrice=s.target.value)}}}),t._v(" "),a("span",[t._v("-")]),t._v(" "),a("input",{directives:[{name:"model",rawName:"v-model",value:t.highPrice,expression:"highPrice"}],staticClass:"high",attrs:{type:"number",placeholder:"最高价格"},domProps:{value:t.highPrice},on:{input:function(s){s.target.composing||(t.highPrice=s.target.value)}}})])]),t._v(" "),a("div",{staticClass:"sort-price"},[a("span",[t._v("价格排序")]),t._v(" "),a("ul",t._l(t.sortList2,function(s,e){return a("li",{class:{active:t.sortPriceIndex==e},on:{click:function(a){t.getPriceSort(s.name,s.value,e)}}},[a("span",[t._v(t._s(s.name))])])}))]),t._v(" "),a("div",{staticClass:"flex-layout price-btn"},[a("p",{staticClass:"btn-cancel",on:{click:t.resetBtn}},[t._v("重置")]),t._v(" "),a("p",{staticClass:"btn-sort-confirm btn-theme",on:{click:t.confirmBtn}},[t._v("确定")])])])]):t._e(),t._v(" "),a("div",{staticClass:"ui-dialog",on:{click:function(s){t.closeDialog()}}}),t._v(" "),t.showAlertTip?a("alert-tip",{attrs:{alertText:t.alertText}}):t._e()],1)},staticRenderFns:[]};var p=a("VU/8")(d,u,!1,function(t){a("tGGp")},"data-v-8b0bf664",null).exports,m=a("KgXo"),v=a("NXlk"),g=a("hXbj"),f={name:"productList",data:function(){return{showLoading:!0,sortList:["全部分类","价格"],timer:null,count:0,proList:[],searchVal:"",params:{areaId:"",showType:"",odBy:"",pName:"",vFrom:"",vTo:"",page:1},odByName:"价格",sortIndex:null,isLastPage:!1,loadmore:!0,isLoading:!0,noData:!1}},components:{product:h.a,loading:m.a,sortTabs:p,loadMore:v.a,cartNum:g.a,FooterNav:l.a},computed:r()({},Object(n.c)(["sortPro"])),created:function(){this.CHOOSE_PROSORT({sortPro:"全部分类",index:0}),this._initData()},methods:r()({},Object(n.b)(["CHOOSE_PROSORT"]),{_initData:function(){this.$route.query.areaId&&(this.params.areaId=this.$route.query.areaId),this.titleChange(),this._getProList()},_getProList:function(t){var s=this,a={params:{showType:this.params.showType,odBy:this.params.odBy,pName:this.params.pName,vFrom:this.params.vFrom,vTo:this.params.vTo,pageNo:this.params.page}};this.params.areaId&&(a.params.areaId=this.params.areaId),console.log(a.params.areaId),Object(c.u)(a).then(function(a){var e=a.attributes.resultList;s.isLastPage=a.attributes.isLastPage,s.proList=t?[].concat(i()(s.proList),i()(e)):e,s.isLoading=!1,0==s.proList.length?s.loadmore=!1:s.isLastPage?s.noData=!0:s.noData=!1})},loadMore:function(){this.isLastPage?(this.isLoading=!1,this.noData=!0):(this.params.page++,this.isLoading=!0,this.noData=!1,this._getProList(!0))},chooseSort:function(t){this.sortIndex!=t?this.sortIndex=t:this.sortIndex=null},sortPrice:function(t,s,a,e){this.odByName=t,this.params.odBy=s,this.params.vFrom=a,this.params.vTo=e,this.params.page=1,this.loadmore=!0,this.isLoading=!0,this.noData=!1,this.proList=[],this._getProList()},sortType:function(t){this.params.showType=t,this.params.pName="",this.searchVal="",this.resetSort()},searchTarget:function(t){this.params.pName=t,this.resetSort(),this.$refs.searchInput.blur()},resetSort:function(){this.odByName="价格",this.params.odBy="",this.params.vFrom="",this.params.vTo="",this.params.page=1,this.proList=[],this.loadmore=!0,this.isLoading=!0,this.noData=!1,this._getProList()},closeDialog:function(){this.sortIndex=null},titleChange:function(){this.$route.query.areaId&&!this.$route.query.productid?(this.params.areaId=this.$route.query.areaId,Object(c.e)({params:{areaId:this.params.areaId}}).then(function(t){document.title=t.obj.name})):document.title="商品列表"}}),watch:{$route:"titleChange"}},_={render:function(){var t=this,s=t.$createElement,e=t._self._c||s;return e("div",{class:["banner-bt-2",""==t.params.areaId?"":"banner-bt-22"]},[e("div",{attrs:{id:"proList"}},[e("div",{staticClass:"fixed-top pdt pdl pdr bg-show"},[e("form",{staticClass:"search-bar list-info-h",attrs:{action:"javascript:return true;"}},[e("div",{staticClass:"list-box"},[e("i",{staticClass:"icon-search"}),t._v(" "),e("input",{directives:[{name:"model",rawName:"v-model",value:t.searchVal,expression:"searchVal"}],ref:"searchInput",staticClass:"list-info-h",attrs:{type:"search",placeholder:"请输入商品名称、品牌等"},domProps:{value:t.searchVal},on:{keyup:function(s){if(!("button"in s)&&13!==s.keyCode)return null;t.searchTarget(t.searchVal)},input:function(s){s.target.composing||(t.searchVal=s.target.value)}}}),t._v(" "),e("input",{staticClass:"search_submit",staticStyle:{display:"none"},attrs:{type:"submit",name:"submit"},on:{click:function(s){s.preventDefault(),t.searchTarget(t.searchVal)}}})])]),t._v(" "),e("ul",{staticClass:"sort-tabs flex-layout"},t._l(t.sortList,function(s,a){return e("li",{key:a,on:{click:function(s){t.chooseSort(a)}}},[e("p",[e("span",[t._v(t._s(0==a?t.sortPro:t.odByName))]),t._v(" "),e("i",{class:[t.sortIndex==a?"icon-arrow-up font-theme":"icon-arrow-down"]})])])}))]),t._v(" "),e("sort-tabs",{directives:[{name:"show",rawName:"v-show",value:null!=t.sortIndex,expression:"sortIndex != null"}],attrs:{sortIndex:t.sortIndex},on:{closeDialog:t.closeDialog,sortPrice:t.sortPrice,sortType:t.sortType}}),t._v(" "),t.proList.length?e("product",{attrs:{proList:t.proList,areaID:t.params.areaId}}):t._e(),t._v(" "),t.loadmore?e("load-more",{attrs:{isLoading:t.isLoading,noData:t.noData},on:{loadMore:t.loadMore}}):t._e(),t._v(" "),0!=t.proList.length||t.isLoading?t._e():e("div",{staticClass:"nothing"},[e("img",{attrs:{src:a("pkH0")}}),t._v(" "),e("p",{staticClass:"font-gray"},[t._v("暂时找不到该商品，我们会尽量引进更多商品")])]),t._v(" "),e("transition",{attrs:{name:"router-slid",mode:"out-in"}},[e("router-view")],1)],1),t._v(" "),""==t.params.areaId?e("div",{staticClass:"fixed-bottom bg-show"},[e("footer-nav")],1):t._e(),t._v(" "),e("div",{staticClass:"fixed-right"},[e("router-link",{attrs:{to:"/cart"}},[e("i",{staticClass:"icon-cart"}),t._v(" "),e("cart-num",{staticClass:"semiCirclePoint"})],1),t._v(" "),t._m(0)],1)])},staticRenderFns:[function(){var t=this.$createElement,s=this._self._c||t;return s("a",{attrs:{href:"#proList"}},[s("i",{staticClass:"icon-top"})])}]};var P=a("VU/8")(f,_,!1,function(t){a("VZni")},"data-v-5b61d714",null);s.default=P.exports},VZni:function(t,s){},tGGp:function(t,s){}});
//# sourceMappingURL=8.e2270248b29a0615a1c4.js.map